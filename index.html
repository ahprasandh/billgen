<html>

<head>
    <title>
        Bill Generator
    </title>
    <link rel="icon" type="image/x-icon"
        href="data:image/png;base64,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">
    <script src="./static/js/vue@3.5.12.js"></script>
    <script src="./static/js/dom-to-image.min.js"></script>

    <link href="./static/css/style.css" rel="stylesheet" />
    <!-- Image converter Used
    https://github.com/tsayen/dom-to-image -->
</head>

<body>
    <div id="app" class="night">
        <section class="wrapper" :class="[font]">
            <div class="toastMsgContainer">
                <div v-for="msg in toasts" class="toast">
                    <img class="toastImg" :src="getToastIcon(msg.mode)" />
                    {{msg.con}}
                </div>
            </div>
            <div v-if="showDownloads" class="downloads" @click="showDownloads=false">
                <button class="closeBut" @click.stop="showDownloads=false">X</button>
                <template v-for="image in downloads">
                    <div @click.stop="" class="wrap">
                        <a class="down downBut" :href="image.url" :download="image.name">
                            <img class="downIco" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYklEQVR4nO2ZPU7DMBSAgxQGVq6BxAVaptI7MMPEgtRm6IKqjMxcoe0BehI2JNpDsHZJPmTJIGPSCKj/HviTLCWtZL0v79lWXooik8n8PYBjYAxMgdk3xx0wAI5iB38BbPk9T8B5zOB3HM4rcBajbLa44xk4CSkwxj2PIQUqDwItcBVKoMYPDbAG7n+wo82MoXbCS6CMJeCKDTCULIDeIYeSBd4zUUoWUIykC1TSBeos8B8y0AALPdSJLE5gYcy9lChQh5j7gyzwlZyB0CXU6sW60td2Buz/D8GLwNKY6waYG/dz9Ztxv0paQAGcdl2nLNCYT3kfOjtNigLo2r7tCf7aQfDez4FOCYfBBznIPkk4Dj7YSdzqxepi27TJ7wOxqUOUUHCBCjlMuwRGCG+rlLpplDove/ukqm3n6AOHL3bqM1Zn8JbEJtEnP+gN3ion1dKeAA+Rx0Svz/72eiaTKUTyBizGaOO251aWAAAAAElFTkSuQmCC">
                            Download
                        </a>
                        <input v-model="image.name" class="filename">
                        <img class="previewImg" :src="image.url" />
                    </div>
                </template>
            </div>
            <div class="editor">
                <div class="panel panel-primary">
                    <div class="panel-heading">Bunk Details
                        <div class="buttonWrap">
                            <button class="down" @click="randomize">Randomize</button>
                            <button class="glow" @click="generate">Generate Bill</button>
                            <button class="down" :class="{available:toasts.length!==0}" @click="showDownloads=true">View Bills ({{downloads.length}})</button>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="form-group">
                            <span>Bunk</span>
                            <select class="form-input" v-model="logo">
                                <option v-for="opt in logoOptions" :value="opt.value">{{opt.name}}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <span>Bank Logo</span>
                            <input type="checkbox" class="form-input" name="machine" v-model="bankPrint">
                        </div>
                        <div class="form-group">
                            <span>Font</span>
                            <select class="form-input" v-model="font">
                                <option v-for="opt in fontOptions" :value="opt.value">{{opt.name}}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <span>Message</span>
                            <input type="text" class="form-input" v-model="topMsg">
                        </div>
                        <div class="form-group">
                            <span>Footer</span>
                            <input type="text" class="form-input" v-model="footer">
                        </div>
                        <template v-for="line,i in address">
                            <div class="form-group">
                                <span>Address Line {{i}}</span>
                                <input type="text" class="form-input" v-model="line">
                                <div class="changeWrap">
                                    <span class="changeIco" @click="address.splice(0,1)">-</span>
                                    <span class="changeIco" @click="address.splice(i+1,0,'')">+</span>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
                <div class="panel panel-primary">
                    <div class="panel-heading">Enter Data</div>
                    <div class="panel-body">
                        <template v-for="inp,i in billOptions">
                            <div v-if="inp.name.length>0" class="form-group">
                                <input type="text" class="form-label" v-model="inp.name" />
                                <input type="text" class="form-input" v-model="inp.value" :class="[{disabled:inp.key=='amount'}]" :disabled="inp.key=='amount'">
                                <div class="changeWrap">
                                    <span class="changeIco" @click="billOptions.splice(i,1)">-</span>
                                    <span class="changeIco" @click="billOptions.splice(i+1,0,{name:'Key',value:''})">+</span>
                                </div>
                            </div>
                        </template>
                    </div>

                </div>
            </div>
            <div class="preview">
                <div id="image_cont" class="template-container">
                    <div class="pump-logo">
                        <img :src="logo" class="pumpLogo" :class="{indianoil:logo.indexOf('indianoil')!==-1}">
                        <img v-if="bankPrint" v-for="i in [0,1,2,3]" class="sidelogo" :class="['h'+i]" src="static/images/side-logo.webp">
                    </div>
                    <div class="template-content">
                        <div class="welcome info-block" v-text="topMsg"></div>
                        <div class="info-block address" id="address">
                            <span class="data">
                                <template v-for="line in address">
                                    {{line}}<br />
                                </template>
                            </span>
                        </div>
                        <div class="info-block">
                            <template v-for="item in billOptions">
                                <div class="line-item" v-if="item.name.length>0">
                                    <span class="label">{{item.name}}</span>
                                    <span class="separator">:</span>
                                    <span class="data">{{item.value}}</span>
                                </div>
                                <br v-else />
                            </template>
                        </div>
                        <div class="footer" v-text="footer"></div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        const { createApp, ref } = Vue

        createApp({
            data() {
                return {
                    toasts: [
                    ],
                    topMsg: "Welcomes You",
                    footer: "Thank You! Please Visit Again..",
                    font: "thermal",
                    fontOptions: [
                        { name: "Thermal", value: "thermal" },
                        { name: "Merchant", value: "merchant" },
                        { name: "Press", value: "press" }
                    ],
                    downloads: [],
                    showDownloads: false,
                    logo: "static/images/indianoil.png",
                    logoOptions: [
                        { name: "Indian Oil", key: "indianoil", value: "static/images/indianoil.png" },
                        { name: "Bharat Petroleum", key: "bp", value: "static/images/bharat-petroleum.png" },
                        { name: "HP", key: "hp", value: "static/images/hp.svg" }
                    ],
                    bankPrint: false,
                    address: [
                    ],
                    addressOptions: [
                        ["Kavitha Agency",
                            "690,Gst road,Urapakkam",
                            "Tel. No: 9380488866"],
                        ["A. Shanmuga Sundaram",
                            "Address: 327,GST ROAD,CHROMEPET",
                            "Tel. NO: 044 2238133"],
                        ["SHRI BALAJI AGENCIES",
                            "CHINNAKALAPET",
                            "PONDICHERRY 605014",
                            "PH: 0413 2656336"],
                        ["GANAPATHY MURUGAN AGENCY",
                            "1306/A NH208 CHINTHAMANI",
                            "RAJAPALAYAM"],
                    ],
                    billOptions: [],
                    billOptionsForBunk: {
                        indianoil: [
                            { name: "Receipt No", value: "0000000000", key: "receiptNumber" },
                            { name: "Local ID", value: "0000000000", key: "localId" },
                            { name: "FIP No", value: "1", key: "fipNo" },
                            { name: "Nozzle No", value: "1", key: "nozzleNo" },
                            { name: "Product", value: "Diesel", key: "product" },
                            { name: "" },
                            { name: "PresetType", value: "Volume", key: "presetType" },
                            { name: "Rate(Rs/L)", value: "92.77", key: "rate" },
                            { name: "Volume(L)", value: "55.7", key: "volume" },
                            { name: "Amount(Rs)", value: "5065.7", key: "amount" },
                            { name: "Atot", value: "0000000000.000", key: "atot" },
                            { name: "Vtot", value: "0000000000.000", key: "vtot" },
                            { name: "" },
                            { name: "Vehicle No", value: "Not Entered", key: "vehicleNo" },
                            { name: "Mobile No", value: "Not Entered", key: "mobileNo" },
                            { name: "" },
                            { name: "Date", value: "00/00/00", key: "date" },
                            { name: "Time", value: "10:24", key: "time" },
                            { name: "" },
                            { name: "CST No", value: "", key: "cstNo" },
                            { name: "LST No", value: "", key: "lstNo" },
                            { name: "VAT No", value: "", key: "vatNo" },
                            { name: "GSTIN", value: "", key: "gstNo" },
                            { name: "ATTENDANT ID", value: "Not Available", key: "attendantId" },
                            { name: "FCC DATE", value: "Not Available", key: "fccDate" },
                            { name: "FCC TIME", value: "Not Available", key: "fccTime" },
                        ],
                        bp: [
                            { name: "Date", value: "00/00/00", key: "date" },
                            { name: "Time", value: "10:24", key: "time" },
                            { name: "Bay No", value: "1", key: "fipNo" },
                            { name: "Nozzle No", value: "1", key: "nozzelNo" },
                            { name: "Product", value: "Diesel", key: "product" },
                            { name: "Pay mode", value: "Card", key: "paymode" },
                            { name: "Txn Id", value: "0000000000", key: "receiptNumber" },
                            { name: "Attendant ID", value: "Not Available", key: "attendantId" },
                            { name: "" },
                            { name: "Rate/Ltr", value: "92.77", key: "rate" },
                            { name: "Volume(Ltr.)", value: "55.7", key: "volume" },
                            { name: "Amount(Rs)", value: "5065.7", key: "amount" },
                            { name: "Preset Type", value: "Local Volume", key: "presetType" },
                            { name: "Preset Value", value: "00.00", key: "presetValue" },
                            { name: "Vech No.", value: "Not Entered", key: "vehicleNo" },
                            { name: "Mobile No", value: "Not Entered", key: "mobileNo" }
                        ],
                        hp: [
                            { name: "Date", value: "00/00/00", key: "date" },
                            { name: "Time", value: "10:24", key: "time" },
                            { name: "Invoice NO.", value: "0000000000", key: "receiptNumber" },
                            { name: "Vehicle NO.", value: "Not Entered", key: "vehicleNo" },
                            { name: "Nozzle", value: "1", key: "nozzelNo" },
                            { name: "Product", value: "Diesel", key: "product" },
                            { name: "Unit Rate", value: "92.77", key: "rate" },
                            { name: "Quantity", value: "55.7", key: "volume" },
                            { name: "Total Amount(Rs)", value: "5065.7", key: "amount" }
                        ]
                    }
                }
            },
            mounted() {
                this.changeBunk(this.logoOptions[0].key)
            },
            methods: {
                getToastIcon(mode='suc'){
                    return mode==='err'?'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFCUlEQVR4nO2XfUxVZRzHH835ssZKp7X0D6OcNavVlnAV7onFGhdf4AJK82ViMW0EDYHexhR1uAhfmJFOM/E8vJ8DVwh7MVuSwLQQZzAQuOcBIp2tmokTWSzknm87Bzhe7wtcbpcuOH7bd7s7d+f5fT/P73n5HUImYzImYzLcCUSTh8CR3WQiBkLJDHDkC3Ckg0y0QBCZCT05A44AesLIBFw2JtX8gLrIRApw5IiV+QEtJwvJRAhw5A0785y6jBLJeA8EkufAkb+dAHRiCZlu9w5H/KEnm7zj2NoIIVPAkXMOzXMaxEGbd6aCI+ehJ3cQQJ7xnvuBmdxsbVZOngNsetgRxB4EkWmDGz3T6r/vvT37Zs3Mimmw1L0E+YSvs2rcBEf+dAAX6h0AjgTfN/tZC2Ax+8HSvBSImuF8SdkDnPEOgJ5QzcSrU9TZVwHMfpCFRaMB6AdHnvAGANNmf4uPZl6DSJ3r1LScOs/22RqPGcsTWhbTYimRikzkBVZPBXaTiqyPF6R+XpS6eJG18iI7/fN72/p+X7cMd4NnQd4/3w7A0vgy5LcfsTe/fR4sPzxvW4Xt/8n0rl2YeqKYraUCq6Miw2iUV9SMs0Ierl6Mw12z7n6IFj/Ix5+E/M6jkFPmQDYtHqgOfcoWIN1t87zYZqCC1DRk6GhuA1I/EhCTsAerNyYgyLgeASuiELgqGk8vWoRnl7yAdW/tQHJaDvYeqgRfbNZgxLI6NNXsRF9LoH1FrJdX0mzbyiSM2nhp6bVZvMgO84IkK8mzj9diU3w6lq9cA53B6FC+vr6qrJ8FhW/A1pQDyDpao4GUlF0E+/FdWMz+9gA/vQgET7UFCBiV+fz89seoyC4pyY4XXkHc+9kIWLnWqfHhAKy1NvYD7D1cqYGc+aYctxtXDL+59eSacju7bD6nuHU+FSWmJDh0og6r1sePaNxVAEXLQiOwMW4XjtDLKkSRqV7dH6p53sElpyfxrpuvaPWhAmsYmiFjzDaXzbsKMKRXwtZjR6ZJzZNbYkYTTVHvCxuAKqW9cBmAClKB9QmS8OHhMQPQDWprShZ4UVLzleZUo2rPQUhxr6N75YLrI15g2afZDFrcFsoL7FMqSG22R2DWZzVjDqAzGBGTkO7sGK6lIks6VmSe6xCAF1j1aM/14ZSacUmVJ8fMK+9AfsUvvbllHTS/1OxrAzBwRI5ngIr2Xnz1W7+qio5e2VR/61t6rnOmCoDHX4MjNW7YN24A8r/+Fac6/9EgFJU19/yRc/6Gjx1A38LVkCJ348v9Z8cNAFWWkakdJbU3cOrqPZCTDbcuaAB/LY3FhUQehbmN424JUSvllrSh6LvrMF3uQrm5p494OsFYA1AbPdgAaZknERGTBP2qaFWRm5Oxc2/ZmAGkuZHPKcCW5APD3pyeBtjiZj6H94AyEyPdnGn7yj0GkOZ2Psmi9D5Vtn9YN3CRsfHI+LxQVUTsva40YnOyxwCMbuZTPltJaemV6bkCC+FF6WO1rRBYt7L+hl5UBvqksFxVxrEC7Xng6miPAehdyydTgZmpyCqpyPYrn7dKH+ewP9KFGntGGlBniOguKro6210p39hkMPwN4XdGzBdivO1yS60zGKu10iklPVagKuLNeyX1Dwk/5/KA/3c+nSEsaqRN5W8IM3oOIMzz+fxDjFlOBwwx7vOU+THN5xcaHqmUTmdQ90SP8tuTM+/tfJMxGeQBiH8BcsuAr0Vop+IAAAAASUVORK5CYII=':'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEOklEQVR4nO2bXUhTYRjH3znbR4oZmZDhyOWmq5yaZm4nNDBFLKEvurNuJIKiqIvsvqIPKIMu6iYjKIKKnEURgX04RKupN0H0ddnwpswZbTuHeuJ9d45s85xtuHPWeXf2wB/Oed/njOf5ned9zsc2hHKWMykbRQiByuRFGTSgRN8QQucRQgZFAAQCAVUoBRDnNQEgNGWP0YuB8uhKUA4AWmSJyn18PACsKP8cADkNxM6Az+cjEvb9fj+R1LzcxyeRpgGMaAWAYIqcddU3wfj4YiJGaAAhtB8hpEcaBLAlauyTHCAgOoD/rRQA6PmkP8nVF4AyAPEg0u4RIAZAqjSl9uU6fhFNMAcAKVEBAfUvAWUrIKA1AEh9SpbgqFwvUoAiAKm8vVocAM7DqEJJACxIWI5HZaAQAJIdAFKfMgbAq4Jk4zWSSQDRFvOhmVKS4BMCSFA5WQ/Am6Rysh6AYLKcecFyABAdFSD72qcFQKIr1v8FcL+/DB5cKVMawGLmlQfwy2cDh9UA9jUGmHtn0x6ASydL55O43FeqLQDTI5Wwolg/n0RxkR78r9ZqB8CxnuXkmJKSEiK8jceoBhAcW/cxlcA/PK4A4xId6HQ6aGlpgdbWVrJtWKKD90Nr6AXAPWnyphL4zrZC4m+xWKC7u5uovDzyPf6utkJ6AbAehg29dXxLFPTrWxbQ6RDk5+dDe3v7PICOjg4yhj9n+EY5nQA4/HLiWdMrqYCDk3ZoXG8ivlVVVfPJC8JjeK6u2gi/JygFwA66f4V91dNiAd++sIr4mc0m6OrqWgAAj5lMEUB3Lq6iEwCH9XTziFjAW5uWEr8WV/WC5AXV1NQQn7bmpfQCYD3Mn/D4ug/xAS8rzCN+B/Y1SgLAfQH7LC/S0wuAw3rkngxO2v9GB2w26iJrvK4OThxqFQXQ2dlJfArMeZQD8DAQGq6PWQpOu5H4VVZWQkNDAxzsaYYjvdtg754dsHf3djjc2wYdWyONcKPDRD8AdpAJRF8WzxyN3PHhRoerAEOIFh4TmuC54yvpB8BhPXZNBCfsf3DAP8Zs5MlPgGC1WsHpdBLhbSH56goDzIzbsgSAhwH2eeNLIeiPTypggy2yFMRUYzMSH3pvhDwiAAaZv+HXteNC4D/f2KC/rxSaa81QVJBH5Kozk7HZN6m/F6AGAEcuje6Z0DvH11STyzoAHIYw5PYne1bIagAckftzyFc1o2EADLCPXO/lgEAtAA5ryPVF6qFJGwA8ZDl8TacnZAEABsKD7u+h0Q1TCgCY4+fKROZW83Oz2fyvsZf8WJ9I7Kf4ueF0AIBKJVg3vx/mIZTx6uPH8Nz2tAEEr1pidW0thG6uh/DdemAfuhT/bZAgieVwNgGo0+kkLw0gXtetEB5wAHvbCey9TZkGgG0HQugF3xPm+LJP68wLpvYloLh5VZCs4v8LyhnSuP0DuADD/5V/7JQAAAAASUVORK5CYII='
                },
                randomize() {
                    for (let i = 0; i < this.billOptions.length; i++) {
                        var opt = this.billOptions[i];
                        if (opt.key == 'receiptNumber') {
                            opt.value = this.randomString()
                        }
                        if (opt.key == 'fipNo') {
                            opt.value = this.generateRandomNum(1, 3, 0)
                        }
                        if (opt.key == 'nozzleNo') {
                            opt.value = this.generateRandomNum(1, 5, 0)
                        }
                        if (opt.key == 'localId') {
                            opt.value = this.generateRandomNum()
                        }
                        if (opt.key == 'atot' || opt.key == 'vtot') {
                            opt.value = this.generateRandomNum() + "." + this.generateRandomNum(1, 999, 3)
                        }
                        if (opt.key == 'date') {
                            opt.value = this.formatDate(new Date())
                        }
                        if (opt.key == 'time') {
                            opt.value = this.generateRandomNum(1, 12, 2) + ":" + this.generateRandomNum(1, 12, 2)
                        }
                    }
                    this.address = this.deepClone(this.addressOptions[this.generateRandomNum(0, 3, 0)]);
                },
                generateRandomNum(start = 1, end = 1000000, stringToLength = 8) {
                    let x = Math.floor((Math.random() * end) + start);
                    x = x.toString();
                    if (x.length < stringToLength) {
                        var pre = "";
                        for (let i = 0; i < stringToLength - x.length; i++) {
                            pre += "0";
                        }
                        x = pre + x;
                    }
                    return x;
                },
                randomString() {
                    let length = 6;
                    let chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'
                    var result = '';
                    for (var i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];
                    return result.toUpperCase();
                },
                formatDate(date) {
                    let day = date.toLocaleString('default', { day: '2-digit' });
                    let month = date.toLocaleString('default', { month: 'numeric' });
                    let year = date.toLocaleString('default', { year: 'numeric' });
                    return day + '/' + month + '/' + year;
                },
                parseDate(date) {
                    var parts = date.split("/");
                    var dt = new Date(parseInt(parts[2], 10), parseInt(parts[1], 10) - 1, parseInt(parts[0], 10));
                    return dt;
                },
                generate() {
                    var date; var amt;
                    for (let i = 0; i < this.billOptions.length; i++) {
                        var opt = this.billOptions[i];
                        if (opt.key == 'date') {
                            date = opt.value;
                        }
                        if (opt.key == 'amount') {
                            amt = opt.value;
                        }
                        if (amt && date) {
                            break;
                        }
                    }
                    date = this.parseDate(date);
                    let day = date.toLocaleString('default', { day: '2-digit' });
                    let mon = date.toLocaleString('default', { month: 'short' });
                    let year = date.toLocaleString('default', { year: 'numeric' });
                    let name = `${mon}${year}/${day} ${amt}.png`;
                    var node = document.getElementById('image_cont');
                    domtoimage.toPng(node)
                        .then((dataUrl) => {
                            this.downloads.push({ url: dataUrl, name: name });
                            this.toasts.push({con:"Bill generated"})
                            // setTimeout(()=>this.toasts.shift(),2000);
                        })
                        .catch(function (error) {
                            this.toasts.push({con:"Oops, Something went wrong!",mode:'err'})
                            setTimeout(()=>this.toasts.shift(),2000);
                            console.error(error);
                        });
                },
                changeBunk(key) {
                    this.billOptions = this.deepClone(this.billOptionsForBunk[key]);
                    if (key == 'indianoil') {
                        this.topMsg = "Welcomes You"
                        this.footer = "Thank You! Please Visit Again.."
                    } else if (key == 'bp') {
                        this.topMsg = ""
                        this.footer = "THANK YOU VISIT AGAIN SAY NO TO CORRUPTION"
                    } else if (key == 'hp') {
                        this.topMsg = ""
                        this.footer = "Thank You, Please Come Again"
                    }
                    this.randomize();
                },
                deepClone: function (obj) {
                    if (typeof obj !== "object" || obj === null) { return obj }
                    const newObject = Array.isArray(obj) ? [] : {}
                    for (let key in obj) {
                        const value = obj[key]
                        newObject[key] = this.deepClone(value)
                    }
                    return newObject;
                }
            },
            watch: {
                logo(val) {
                    var logoOpt;
                    for (let i = 0; i < this.logoOptions.length; i++) {
                        if (this.logoOptions[i].value === val) {
                            logoOpt = this.logoOptions[i];
                            break;
                        }
                    }
                    this.changeBunk(logoOpt.key);
                },
                billOptions: {
                    handler(val, oldVal) {
                        let rI, vI, aI;
                        for (let i = 0; i < this.billOptions.length; i++) {
                            var opt = this.billOptions[i];
                            if (opt.key == 'rate') {
                                rI = i;
                            }
                            if (opt.key == 'volume') {
                                vI = i;
                            }
                            if (opt.key == 'amount') {
                                aI = i;
                            }
                        }
                        let aval = parseFloat(this.billOptions[rI].value) * parseFloat(this.billOptions[vI].value);
                        this.billOptions[aI].value = aval.toFixed(2);
                    },
                    deep: true
                }
            },
        }).mount('#app')
    </script>
</body>

</html>